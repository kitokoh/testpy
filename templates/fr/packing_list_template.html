<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Liste de Colisage - {{packing_list_number}}</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #fff;
            color: #333;
            font-size: 10px; /* Smaller base font for more info on one page */
        }
        .packing-list-box {
            max-width: 1000px; /* Allow wider for more table columns */
            margin: 20px auto;
            padding: 20px;
            border: 1px solid #ccc;
            box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
        }
        th, td {
            border: 1px solid #666; /* Clearer borders for customs docs */
            padding: 6px;
            text-align: left;
            vertical-align: top;
        }
        th {
            background-color: #f0f0f0;
            font-weight: bold;
        }
        .header-table td, .parties-table td, .details-table td {
            border: none; /* No borders for layout tables */
            padding: 3px 0;
        }
        .header-table { margin-bottom: 20px; }
        .document-title {
            font-size: 20px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 10px;
            color: #000;
        }
        .company-logo {
            max-height: 70px;
            margin-bottom: 10px;
        }
        .section-title {
            font-size: 12px;
            font-weight: bold;
            margin-top: 15px;
            margin-bottom: 5px;
            border-bottom: 1px solid #ccc;
            padding-bottom: 3px;
        }
        .text-right { text-align: right !important; }
        .text-center { text-align: center !important; }
        .bold { font-weight: bold; }
        .items-table th { font-size: 9px; } /* Smaller font for item table headers */
        .items-table td { font-size: 9px; }
        .totals-table td { font-weight: bold; }
        .declaration, .signature-section {
            margin-top: 20px;
            font-size: 10px;
        }
        .signature-line {
            border-bottom: 1px solid #333;
            width: 250px;
            margin-top: 30px;
            margin-bottom: 5px;
        }
        .stamp-area {
            border: 1px dashed #ccc;
            height: 100px;
            width: 200px;
            text-align: center;
            padding: 5px;
            margin-top: 10px;
        }
        .stamp-area img { max-width: 100%; max-height: 100%; }
        @media print {
            body { font-size: 9pt; } /* Adjust print font size */
            .packing-list-box { margin: 0; box-shadow: none; border: none; }
            th, td { border: 1px solid #333 !important; /* Ensure borders print */ }
            .items-table th { font-size: 8pt; }
            .items-table td { font-size: 8pt; }
            .section-title { page-break-after: avoid; }
            table { page-break-inside: auto; }
            tr { page-break-inside: avoid; page-break-after: auto; }
        }
    </style>
</head>
<body>
    <div class="packing-list-box">
        <table class="header-table">
            <tr>
                <td>
                    {{#if company_logo_path_for_stamp}}
                        <img src="{{company_logo_path_for_stamp}}" alt="Company Logo" class="company-logo">
                    {{/if}}
                </td>
                <td class="text-right">
                    <h1 class="document-title">LISTE DE COLISAGE</h1>
                </td>
            </tr>
        </table>

        <table class="parties-table">
            <tr>
                <td style="width:50%;">
                    <div class="section-title">Exportateur / Expéditeur</div>
                    <strong>{{exporter_company_name}}</strong><br>
                    {{exporter_address}}<br>
                    Attn: {{exporter_contact_person}}<br>
                    Tel: {{exporter_phone}}<br>
                    Email: {{exporter_email}}
                </td>
                <td style="width:50%;">
                    <div class="section-title">Destinataire (Consignee)</div>
                    <strong>{{consignee_name}}</strong><br>
                    {{consignee_address}}<br>
                    Attn: {{consignee_contact_person}}<br>
                    Tel: {{consignee_phone}}<br>
                    Email: {{consignee_email}}
                </td>
            </tr>
            {{#if notify_party_name}}
            <tr>
                <td colspan="2">
                    <div class="section-title">Partie à Notifier (Notify Party)</div>
                    <strong>{{notify_party_name}}</strong><br>
                    {{notify_party_address}}
                </td>
            </tr>
            {{/if}}
        </table>

        <table class="details-table">
            <tr>
                <td><strong>N° Liste de Colisage:</strong> {{packing_list_number}}</td>
                <td><strong>Date Liste de Colisage:</strong> {{packing_list_date}}</td>
            </tr>
            <tr>
                <td><strong>N° Facture:</strong> {{invoice_number}}</td>
                <td><strong>N° Commande:</strong> {{order_number}}</td>
            </tr>
            <tr>
                <td colspan="2"><strong>Date d'Expédition:</strong> {{date_of_shipment}}</td>
            </tr>
        </table>

        <div class="section-title">Détails d'Expédition</div>
        <table>
            <tr>
                <td style="width:50%;"><strong>Port de Chargement:</strong> {{port_of_loading}}</td>
                <td style="width:50%;"><strong>Port de Déchargement:</strong> {{port_of_discharge}}</td>
            </tr>
            <tr>
                <td colspan="2"><strong>Navire / Vol / Détails Transport:</strong> {{vessel_flight_details}}</td>
            </tr>
            <tr>
                <td colspan="2"><strong>Marques d'Expédition:</strong><br>{{shipping_marks}}</td>
            </tr>
        </table>

        <div class="section-title">Contenu des Colis</div>
        <table class="items-table">
            <thead>
                <tr>
                    <th>Code Article</th>
                    <th>Description</th>
                    <th>Qté Colis</th>
                    <th>Unités/Colis</th>
                    <th>Total Unités</th>
                    <th>Poids Net/Unité (kg)</th>
                    <th>Poids Brut/Unité (kg)</th>
                    <th>Poids Net Total (kg)</th>
                    <th>Poids Brut Total (kg)</th>
                    <th>Dimensions Colis (cm)</th>
                    <th>Volume Colis (m³)</th>
                </tr>
            </thead>
            <tbody>
                <!-- {{#each items}} -->
                <tr>
                    <td>{{item_number_or_code}}</td>
                    <td>{{item_description}}</td>
                    <td class="text-center">{{item_quantity_packages}}</td>
                    <td class="text-center">{{item_quantity_units_per_package}}</td>
                    <td class="text-center bold">{{item_total_units}}</td>
                    <td class="text-right">{{item_net_weight_per_unit_formatted}}</td>
                    <td class="text-right">{{item_gross_weight_per_unit_formatted}}</td>
                    <td class="text-right bold">{{item_total_net_weight_formatted}}</td>
                    <td class="text-right bold">{{item_total_gross_weight_formatted}}</td>
                    <td class="text-center">{{item_package_dimensions}}</td>
                    <td class="text-right">{{item_package_volume_formatted}}</td>
                </tr>
                <!-- {{/each}} -->
            </tbody>
        </table>

        <div class="section-title">Totaux</div>
        <table class="totals-table">
            <tr>
                <td style="width:70%;"><strong>Nombre total de colis:</strong></td>
                <td class="text-right" style="width:30%;">{{total_packages_count}}</td>
            </tr>
            <tr>
                <td><strong>Poids Net Total de l'Expédition (kg):</strong></td>
                <td class="text-right">{{total_net_weight_shipment_formatted}}</td>
            </tr>
            <tr>
                <td><strong>Poids Brut Total de l'Expédition (kg):</strong></td>
                <td class="text-right">{{total_gross_weight_shipment_formatted}}</td>
            </tr>
            <tr>
                <td><strong>Volume Total de l'Expédition (m³):</strong></td>
                <td class="text-right">{{total_volume_shipment_formatted}}</td>
            </tr>
        </table>

        <div class="declaration">
            <div class="section-title">Déclaration</div>
            <p>{{declaration_statement}}</p>
        </div>

        <div class="section-title">Instructions</div>
        <p>{{instructions}}</p>

        <table style="margin-top: 40px; border:none;">
            <tr>
                <td style="width: 60%; border:none;">
                    <div class="signature-section">
                        <p>Pour et au nom de {{exporter_company_name}}:</p>
                        <div class="signature-line"></div>
                        <p><strong>{{authorized_signature_name}}</strong></p>
                        <p><em>{{authorized_signature_title}}</em></p>
                        <p>Date: {{signature_date}}</p>
                    </div>
                </td>
                <td style="width: 40%; text-align: center; border:none;">
                    {{#if company_logo_path_for_stamp}}
                    <div class="section-title">Cachet de l'Entreprise</div>
                    <div class="stamp-area">
                        <img src="{{company_logo_path_for_stamp}}" alt="Cachet de l'entreprise">
                    </div>
                    {{/if}}
                </td>
            </tr>
        </table>
    </div>
</body>
</html>
