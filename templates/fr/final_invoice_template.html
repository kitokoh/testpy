<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FACTURE {{doc.invoice_number}}</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            margin: 0;
            padding: 0;
            font-size: 10pt;
        }
        .container {
            width: 90%;
            margin: 20px auto;
            padding: 20px;
            border: 1px solid #eee;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .header, .footer {
            text-align: center;
            margin-bottom: 20px;
        }
        .header img {
            max-width: 200px;
            max-height: 100px;
            margin-bottom: 10px;
        }
        .invoice-title {
            text-align: right;
            font-size: 2.5em;
            font-weight: bold;
            color: #555;
            margin-bottom: 20px;
        }
        .info-section {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
        }
        .info-section div {
            width: 48%;
        }
        .info-section h4 {
            margin-top: 0;
            margin-bottom: 5px;
            color: #444;
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
        }
        .info-section p, .payment-details p, .notes-section p {
            margin: 2px 0;
            font-size: 0.9em;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f8f8f8;
            font-weight: bold;
        }
        .totals-table td {
            text-align: right;
            font-weight: bold;
        }
        .totals-table td:first-child {
            text-align: right;
        }
        .payment-details, .notes-section {
            margin-top: 30px;
            padding: 15px;
            background-color: #f9f9f9;
            border: 1px solid #eee;
        }
        .payment-details h4, .notes-section h4 {
             margin-top: 0;
             margin-bottom: 10px;
             color: #444;
        }
        hr {
            border: 0;
            border-top: 1px solid #eee;
            margin: 20px 0;
        }
        .text-right { text-align: right; }
        .text-bold { font-weight: bold; }
        small { font-size: 0.8em; color: #777; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            {{#if seller.logo_path}}
                <img src="{{seller.logo_path}}" alt="Logo de l'entreprise">
            {{/if}}
            <h2>{{seller.company_name}}</h2>
            <p>{{seller.address_line1}}</p>
            <p>{{seller.city_zip_country}}</p>
            <p>Tél: {{seller.phone}} | Email: {{seller.email}}</p>
            <p>Site Web: {{seller.website}}</p>
            {{#if seller.vat_id}}<p>N° TVA: {{seller.vat_id}}</p>{{/if}}
        </div>

        <div class="invoice-title">FACTURE</div>

        <div class="info-section">
            <div>
                <h4>Client (Facturer à):</h4>
                <p class="text-bold">{{client.company_name}}</p>
                {{#if client.representative_name}}<p>{{client.representative_name}}</p>{{/if}}
                <p>{{client.address_line1}}</p>
                <p>{{client.city_zip_country}}</p>
                {{#if client.vat_id}}<p>N° TVA: {{client.vat_id}}</p>{{/if}}
            </div>
            <div>
                <h4>Détails de la Facture:</h4>
                <p><span class="text-bold">Numéro de Facture:</span> {{doc.invoice_number}}</p>
                <p><span class="text-bold">Date d'Émission:</span> {{doc.issue_date}}</p>
                <p><span class="text-bold">Date d'Échéance:</span> {{doc.due_date}}</p>
            </div>
        </div>

        <table>
            <thead>
                <tr>
                    <th>Description</th>
                    <th style="text-align:center;">Quantité</th>
                    <th style="text-align:right;">Prix Unitaire</th>
                    <th style="text-align:right;">Total</th>
                </tr>
            </thead>
            <tbody>
                {{#each products}}
                <tr>
                    <td>
                        <span class="text-bold">{{this.name}}</span><br>
                        <small>{{this.description}}</small>
                    </td>
                    <td style="text-align:center;">{{this.quantity}}</td>
                    <td style="text-align:right;">{{this.unit_price_formatted}}</td>
                    <td style="text-align:right;">{{this.total_price_formatted}}</td>
                </tr>
                {{/each}}
            </tbody>
        </table>

        <table class="totals-table" style="width: 50%; margin-left: auto;">
            <tr>
                <td>Sous-total:</td>
                <td>{{doc.subtotal_amount_formatted}}</td>
            </tr>
            {{#if doc.discount_amount_raw}}
            <tr>
                <td>Remise ({{doc.discount_rate_percentage}}%):</td>
                <td>-{{doc.discount_amount_formatted}}</td>
            </tr>
            {{/if}}
            <tr>
                <td>{{doc.tax_label}} ({{doc.tax_rate_percentage}}%):</td>
                <td>{{doc.tax_amount_formatted}}</td>
            </tr>
            <tr>
                <td class="text-bold" style="font-size: 1.2em;">TOTAL GÉNÉRAL:</td>
                <td class="text-bold" style="font-size: 1.2em;">{{doc.grand_total_amount_formatted}}</td>
            </tr>
        </table>

        {{#if doc.payment_terms}}
        <div class="payment-details">
            <h4>Conditions de Paiement:</h4>
            <p>{{doc.payment_terms}}</p>
        </div>
        {{/if}}

        <div class="payment-details">
            <h4>Coordonnées Bancaires:</h4>
            <p><strong>Nom de la Banque:</strong> {{seller.bank_name}}</p>
            <p><strong>Titulaire du Compte:</strong> {{seller.bank_account_holder_name}}</p>
            <p><strong>IBAN:</strong> {{seller.bank_iban}}</p>
            <p><strong>SWIFT/BIC:</strong> {{seller.bank_swift_bic}}</p>
        </div>

        {{#if doc.notes}}
        <div class="notes-section">
            <h4>Remarques:</h4>
            <p>{{doc.notes}}</p>
        </div>
        {{/if}}

        <div class="footer">
            <p>Merci de votre confiance!</p>
        </div>
    </div>
</body>
</html>
```
